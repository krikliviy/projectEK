import random
from tkinter import messagebox

# –ë–∞–∑–æ–≤–∏–π –Ω–∞–±—ñ—Ä —Å–∏–º–≤–æ–ª—ñ–≤ (—Ñ—Ä—É–∫—Ç–∏)
symbols_base = ['üçé', 'üçå', 'üçá', 'üçí', 'üçì', 'üçç', 'ü•ù', 'üçë']

# –°–ø–∏—Å–æ–∫ –≤—ñ–¥–∫—Ä–∏—Ç–∏—Ö –∫–∞—Ä—Ç–æ–∫
opened = []

# –°–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ–∫, —è–∫—ñ –≤–∂–µ —Å–ø—ñ–≤–ø–∞–ª–∏
matched = []

# –ü–æ—á–∞—Ç–∫–æ–≤–∏–π —á–∞—Å –¥–ª—è –≥—Ä–∏ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
time_left = 30

# –ß–∏ –∑–∞–ø—É—â–µ–Ω–∞ –≥—Ä–∞
game_started = False

# –õ—ñ—á–∏–ª—å–Ω–∏–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –ø–∞—Ä
correct_count = 0

# –§—É–Ω–∫—Ü—ñ—è, —â–æ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –Ω–∞ –∫–∞—Ä—Ç–∫—É
def on_click(i):
    global opened, game_started, correct_count

    # –Ü–≥–Ω–æ—Ä—É–≤–∞—Ç–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è, —è–∫—â–æ –≥—Ä–∞ —â–µ –Ω–µ –ø–æ—á–∞–ª–∞—Å—å –∞–±–æ –∫–∞—Ä—Ç–∫–∞ –≤–∂–µ –≤—ñ–¥–∫—Ä–∏—Ç–∞/–∑–Ω–∞–π–¥–µ–Ω–∞
    if not game_started or i in matched or i in opened:
        return

    # –ü–æ–∫–∞–∑—É—î–º–æ —Å–∏–º–≤–æ–ª –∫–∞—Ä—Ç–∫–∏
    buttons[i].config(text=symbols[i], state="disabled", bg="white")
    opened.append(i)

    # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ –≤—ñ–¥–∫—Ä–∏—Ç–æ –¥–≤—ñ –∫–∞—Ä—Ç–∫–∏
    if len(opened) == 2:
        first, second = opened
        if symbols[first] == symbols[second]:
            # –Ø–∫—â–æ —Å–∏–º–≤–æ–ª–∏ —Å–ø—ñ–≤–ø–∞–ª–∏ ‚Äî –¥–æ–¥–∞—î–º–æ –¥–æ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö
            matched.extend(opened)
            correct_count += 1
            correct_label.config(text=f"–ü—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –ø–∞—Ä: {correct_count}")
            opened.clear()

            # –Ø–∫—â–æ –≤—Å—ñ –ø–∞—Ä–∏ –∑–Ω–∞–π–¥–µ–Ω–æ ‚Äî –ø–µ—Ä–µ–º–æ–≥–∞
            if len(matched) == len(symbols):
                messagebox.showinfo("–ü–µ—Ä–µ–º–æ–≥–∞!", "–í–∏ –≤—ñ–¥–∫—Ä–∏–ª–∏ –≤—Å—ñ –ø–∞—Ä–∏!")
                end_game()
        else:
            # –Ø–∫—â–æ –Ω–µ —Å–ø—ñ–≤–ø–∞–ª–∏ ‚Äî —Å—Ö–æ–≤–∞—Ç–∏ –ø–∞—Ä–∏ —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
            root.after(1000, hide_pair)

# –§—É–Ω–∫—Ü—ñ—è —Ö–æ–≤–∞—î —Å–∏–º–≤–æ–ª–∏, —è–∫—â–æ –ø–∞—Ä–∏ –Ω–µ —Å–ø—ñ–≤–ø–∞–ª–∏
def hide_pair():
    global opened
    for i in opened:
        buttons[i].config(text="?", state="normal", bg="SystemButtonFace")
    opened.clear()

# –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞–π–º–µ—Ä–∞
def update_timer():
    global time_left
    if not game_started:
        return

    time_left -= 1
    timer_label.config(text=f"–ß–∞—Å: {time_left} —Å")

    if time_left == 0:
        # –Ø–∫—â–æ —á–∞—Å –≤–∏–π—à–æ–≤ ‚Äî –ø–æ—Ä–∞–∑–∫–∞
        messagebox.showinfo("–ß–∞—Å –≤–∏–π—à–æ–≤", "–í–∏ –ø—Ä–æ–≥—Ä–∞–ª–∏!")
        reset_game()
    else:
        # –ó–∞–ø–ª–∞–Ω—É–≤–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞–π–º–µ—Ä–∞ —á–µ—Ä–µ–∑ 1 —Å–µ–∫
        root.after(1000, update_timer)

# –§—É–Ω–∫—Ü—ñ—è –ø–æ—á–∞—Ç–∫—É –≥—Ä–∏
def start_game():
    global game_started
    game_started = True

    # –°–∫–∏–¥–∞—î–º–æ –≤–∏–≥–ª—è–¥ —É—Å—ñ—Ö –∫–Ω–æ–ø–æ–∫
    for btn in buttons:
        btn.config(text="?", state="normal", bg="SystemButtonFace")

    update_timer()

# –§—É–Ω–∫—Ü—ñ—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≥—Ä–∏
def end_game():
    global game_started
    game_started = False
import tkinter as tk  # –Ü–º–ø–æ—Ä—Ç—É—î–º–æ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É –¥–ª—è –≥—Ä–∞—Ñ—ñ—á–Ω–æ–≥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
from functools import partial  # –Ü–º–ø–æ—Ä—Ç—É—î–º–æ partial –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ —É —Ñ—É–Ω–∫—Ü—ñ—é –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –∫–Ω–æ–ø–∫–∏

# –°—Ç–≤–æ—Ä—é—î–º–æ –≥–æ–ª–æ–≤–Ω–µ –≤—ñ–∫–Ω–æ –≥—Ä–∏
root = tk.Tk()
root.title("Memory Game - –ó–≤–æ—Ä–æ—Ç–Ω—ñ–π —Ä–µ–∂–∏–º –∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º")  # –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤—ñ–∫–Ω–∞

# –°—Ç–≤–æ—Ä—é—î–º–æ —Ç–µ–∫—Å—Ç–æ–≤—É –º—ñ—Ç–∫—É –¥–ª—è —Ç–∞–π–º–µ—Ä–∞ (–ø–æ—á–∞—Ç–∫–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è 30 —Å)
timer_label = tk.Label(root, text=f"–ß–∞—Å: 30 —Å", font=("Arial", 14))
timer_label.pack(pady=5)  # –î–æ–¥–∞—î–º–æ –≤—ñ–¥—Å—Ç—É–ø –∑–≤–µ—Ä—Ö—É —ñ –∑–Ω–∏–∑—É (pady)

# –°—Ç–≤–æ—Ä—é—î–º–æ –º—ñ—Ç–∫—É, —è–∫–∞ –ø–æ–∫–∞–∑—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –ø–∞—Ä, –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –≥—Ä–∞–≤—Ü–µ–º
correct_label = tk.Label(root, text="–ü—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –ø–∞—Ä: 0", font=("Arial", 14))
correct_label.pack(pady=5)

# –°—Ç–≤–æ—Ä—é—î–º–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (—Ä–∞–º–∫—É), –≤ —è–∫–æ–º—É –±—É–¥—É—Ç—å –∫–Ω–æ–ø–∫–∏ –≥—Ä–∏ (–∫–∞—Ä—Ç–∫–∏)
frame = tk.Frame(root)
frame.pack()  # –î–æ–¥–∞—î–º–æ —Ä–∞–º–∫—É –¥–æ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞

# –°–ø–∏—Å–æ–∫ –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö –∫–Ω–æ–ø–æ–∫ –≥—Ä–∏ (16 —à—Ç—É–∫ –¥–ª—è –ø–æ–ª—è 4x4)
buttons = []

# –¶–∏–∫–ª –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è 4x4 –∫–Ω–æ–ø–æ–∫ (–≤—Å—å–æ–≥–æ 16)
for i in range(4):
    for j in range(4):
        index = i * 4 + j  # –û–±—á–∏—Å–ª—é—î–º–æ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–Ω–¥–µ–∫—Å –¥–ª—è –∫–æ–∂–Ω–æ—ó –∫–Ω–æ–ø–∫–∏
        btn = tk.Button(
            frame, text="?", width=6, height=3,  # –ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Ç–µ–∫—Å—Ç "?" —ñ —Ä–æ–∑–º—ñ—Ä–∏ –∫–Ω–æ–ø–∫–∏
            font=("Arial", 20),  # –®—Ä–∏—Ñ—Ç —ñ —Ä–æ–∑–º—ñ—Ä —Ç–µ–∫—Å—Ç—É –Ω–∞ –∫–Ω–æ–ø—Ü—ñ
            command=partial(on_click, index)  # –ü–µ—Ä–µ–¥–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é on_click –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º index
        )
        btn.grid(row=i, column=j, padx=5, pady=5)  # –†–æ–∑–º—ñ—â—É—î–º–æ –∫–Ω–æ–ø–∫—É —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ–π –∫–æ–º—ñ—Ä—Ü—ñ —Å—ñ—Ç–∫–∏
        buttons.append(btn)  # –î–æ–¥–∞—î–º–æ –∫–Ω–æ–ø–∫—É –¥–æ —Å–ø–∏—Å–∫—É buttons


# –§—É–Ω–∫—Ü—ñ—è –¥–ª—è —Å–∫–∏–¥–∞–Ω–Ω—è –≥—Ä–∏ —Ç–∞ —ó—ó –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É
def reset_game():
    global symbols, opened, matched, time_left, game_started, correct_count

    # –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π —Å–ø–∏—Å–æ–∫ —Å–∏–º–≤–æ–ª—ñ–≤ —ñ –ø–µ—Ä–µ–º—ñ—à—É—î–º–æ —ó—Ö
    symbols = symbols_base * 2  # –ü–æ–≤—Ç–æ—Ä—é—î–º–æ –∫–æ–∂–µ–Ω —Å–∏–º–≤–æ–ª 2 —Ä–∞–∑–∏, –±–æ –∫–æ–∂–µ–Ω –º–∞—î –ø–∞—Ä—É
    random.shuffle(symbols)  # –ü–µ—Ä–µ–º—ñ—à—É—î–º–æ —Å–∏–º–≤–æ–ª–∏ –≤–∏–ø–∞–¥–∫–æ–≤–∏–º —á–∏–Ω–æ–º

    opened.clear()   # –û—á–∏—â–∞—î–º–æ —Å–ø–∏—Å–æ–∫ –≤—ñ–¥–∫—Ä–∏—Ç–∏—Ö –∫–∞—Ä—Ç–æ–∫
    matched.clear()  # –û—á–∏—â–∞—î–º–æ —Å–ø–∏—Å–æ–∫ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –ø–∞—Ä
    time_left = 30   # –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ —Ç–∞–π–º–µ—Ä –Ω–∞ 30 —Å–µ–∫—É–Ω–¥
    correct_count = 0  # –û–±–Ω—É–ª—è—î–º–æ —Ä–∞—Ö—É–Ω–æ–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –ø–∞—Ä

    # –û–Ω–æ–≤–ª—é—î–º–æ —Ç–µ–∫—Å—Ç–æ–≤—ñ –º—ñ—Ç–∫–∏
    correct_label.config(text="–ü—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –ø–∞—Ä: 0")
    timer_label.config(text=f"–ß–∞—Å: {time_left} —Å")

    game_started = False  # –ì—Ä–∞ —â–µ –Ω–µ –ø–æ—á–∞–ª–∞—Å—å

    # –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –Ω–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞ –∫–Ω–æ–ø–∫–∏ —ñ –±–ª–æ–∫—É—î–º–æ —ó—Ö –Ω–∞ 2.5 —Å–µ–∫—É–Ω–¥–∏
    for i, btn in enumerate(buttons):
        btn.config(text=symbols[i], state="disabled", bg="SystemButtonFace")  # –ü–æ–∫–∞–∑—É—î–º–æ –∫–∞—Ä—Ç–∫–∏ –Ω–∞ —Å—Ç–∞—Ä—Ç—ñ

    # –ß–µ—Ä–µ–∑ 2.5 —Å–µ–∫—É–Ω–¥–∏ –∑–∞–ø—É—Å–∫–∞—î–º–æ –≥—Ä—É (–∫–∞—Ä—Ç–∫–∏ —Å—Ö–æ–≤–∞—é—Ç—å—Å—è)
    root.after(2500, start_game)


# –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –≥—Ä–∏ (–Ω–∞—Ç–∏—Å–∫–∞—î—Ç—å—Å—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º)
reset_button = tk.Button(root, text="–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –≥—Ä—É", font=("Arial", 14), command=reset_game)
reset_button.pack(pady=10)  # –í—ñ–¥—Å—Ç—É–ø –∑–≤–µ—Ä—Ö—É —ñ –∑–Ω–∏–∑—É


# –ó–∞–ø—É—Å–∫–∞—î–º–æ –ø–µ—Ä—à–∏–π –∑–∞–ø—É—Å–∫ –≥—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ –≤—ñ–∫–Ω–∞
reset_game()
# –ó–∞–ø—É—Å–∫–∞—î–º–æ –æ—Å–Ω–æ–≤–Ω–∏–π —Ü–∏–∫–ª —Ä–æ–±–æ—Ç–∏ –≥—Ä–∞—Ñ—ñ—á–Ω–æ–≥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
root.mainloop()

